# JWT (JSON Web Token)

### Authentication(ì¸ì¦) vs Authorization(ì¸ê°€)

- Authentication(ì¸ì¦): ë¡œê·¸ì¸ê³¼ ê°™ì´ ***ì•„ì´ë””, ë¹„ë°€ë²ˆí˜¸*** ë“±ì„ í†µí•´ íŠ¹ì • ì„œë¹„ìŠ¤ì— ì¼ì • ê¶Œí•œì´ ì£¼ì–´ì§„ ***ì‚¬ìš©ìì„ì„ ì¸ì¦ ë°›ìŒ***
- Authorization(ì¸ê°€): ***ì´ë¯¸ ì¸ì¦ë°›ì€ ì‚¬ìš©ì***ê°€ ì„œë¹„ìŠ¤ì˜ íŠ¹ì • ê¸°ëŠ¥ì„ ì‚¬ìš©í•˜ê¸° ìœ„í•œ ***ê¶Œí•œì„ í—ˆê°€ë°›ëŠ” ê³¼ì •***
---
### JWT
- JWTëŠ” ì¸ì¦ë³´ë‹¤ **ì¸ê°€**ì— ì—°ê´€ëœ ê¸°ìˆ ì´ë‹¤
- JWTëŠ” ì‚¬ìš©ìë¥¼ ì‹ë³„í•˜ê¸° ìœ„í•œ **í† í°** ê¸°ë°˜ ì¸ì¦ë°©ë²•ì´ë‹¤
- í† í° ìì²´ì— ì‚¬ìš©ìì˜ ê¶Œí•œ ì •ë³´ë‚˜ ì„œë¹„ìŠ¤ë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•œ ì •ë³´ê°€ í¬í•¨ëœë‹¤ëŠ” íŠ¹ì§•ì´ ìˆë‹¤
- JWTë¥¼ ì‚¬ìš©í•˜ë©´ RESfulê³¼ ê°™ì€ ë¬´ìƒíƒœ(Stateless)ì¸ í™˜ê²½ì—ì„œ ì‚¬ìš©ì ë°ì´í„°ë¥¼ ì£¼ê³  ë°›ì„ ìˆ˜ ìˆê²Œ ëœë‹¤

- JWTëŠ” ì„¸íŒŒíŠ¸ë¡œ ë‚˜ëˆ„ì–´ì§€ë©°, ê° íŒŒíŠ¸ëŠ” ì ìœ¼ë¡œ êµ¬ë¶„í•˜ì—¬ í‘œí˜„ëœë‹¤. (ì˜ˆ) xxxxx.yyyyy.zzzzz

    > ì„¸íŒŒíŠ¸ëŠ” ìˆœì„œëŒ€ë¡œ ***í—¤ë”(Header), í˜ì´ë¡œë“œ(Payload), ì„œëª…(Singture)*** ìœ¼ë¡œ êµ¬ì„±ëœë‹¤.
    
    - Header: JWTë¥¼ ì–´ë–»ê²Œ í•´ì„í•´ì•¼ í•˜ëŠ”ì§€ ëª…ì‹œ (í† í°ì˜ íƒ€ì…ê³¼ í•´ì‹œ ì•”í˜¸í™” ì•Œê³ ë¦¬ì¦˜ìœ¼ë¡œ êµ¬ì„±)
    - Payload: í† í°ì˜ ë°”ë””ì— í¬í•¨í•  ì •ë³´
    - Singture: Base64 URL ì¸ì½”ë“œëœ í—¤ë”ì™€ í˜ì´ë¡œë“œ ê·¸ë¦¬ê³  ë³„ë„ ìƒì„±í•œ JWT secret keyë¥¼ í—¤ë”ì— ì§€ì •ëœ ì•”í˜¸ ì•Œê³ ë¦¬ì¦˜ìœ¼ë¡œ ì•”í˜¸í™”í•œ ê²ƒ
``` java
JWT = B64(Header).B64(Payload).B64(Sig) // B64(Base64 URL-safe Encode)
```
- #### ğŸš§ ì£¼ì˜í•  ì 
  - PayloadëŠ” ì•”í˜¸í™”í•˜ì§€ ì•ŠëŠ”ë‹¤. 
  - ê·¸ë˜ì„œ ì„œëª…ì—†ì´ë„ ëˆ„êµ¬ë‚˜ ì—´ì–´ë³¼ ìˆ˜ ìˆìœ¼ë¯€ë¡œ Payloadì—ëŠ” ë³´ì•ˆì´ ì¤‘ìš”í•œ ë°ì´í„°ëŠ” ë„£ìœ¼ë©´ ì•ˆëœë‹¤. 
  - **í•„ìš”í•œ ìµœì†Œí•œì˜ ì •ë³´ë§Œ ë‹´ì•„ì•¼ í•œë‹¤.**
  
---


### JWT ì‚¬ìš© íë¦„

1.  í´ë¼ì´ì–¸íŠ¸ ì‚¬ìš©ìê°€ idì™€ passwordë¥¼ ì…ë ¥í•´ ë¡œê·¸ì¸ ì‹œë„

2. ì„œë²„ëŠ” ìš”ì²­ì„ í™•ì¸í•˜ê³ , secret keyë¥¼ í†µí•´ Access tokenì„ ë°œê¸‰

3. JWT í† í°ì„ í´ë¼ì´ì–¸íŠ¸ì— ì „ë‹¬

4. í´ë¼ì´ì–¸íŠ¸ì—ì„œ API ì„ ìš”ì²­í• ë•Œ,Â  í´ë¼ì´ì–¸íŠ¸ê°€ Authorization headerì— Access tokenì„ ë‹´ì•„ì„œ ë³´ëƒ„

5. ì„œë²„ëŠ” JWT Signatureë¥¼ ì²´í¬í•˜ê³  Payloadë¡œë¶€í„° ì‚¬ìš©ì ì •ë³´ë¥¼ í™•ì¸í•´ ë°ì´í„°ë¥¼ ë°˜í™˜

---
### Access token & Refresh token

> í´ë¼ì´ì–¸íŠ¸ì˜ ë¡œê·¸ì¸ ì •ë³´ë¥¼ ì„œë²„ ë©”ëª¨ë¦¬ì— ì €ì¥í•˜ì§€ ì•Šê¸° ë•Œë¬¸ì— í† í°ê¸°ë°˜ ì¸ì¦ ë©”ì»¤ë‹ˆì¦˜ì„ ì œê³µí•œë‹¤.

ì²˜ìŒ ì‚¬ìš©ìë¥¼ ë“±ë¡í•  ë•Œ ***Access token***ê³¼ ***Refresh token***ì´ ëª¨ë‘ ë°œê¸‰ë˜ì–´ì•¼ í•œë‹¤.

- Access token: ë§¤ë²ˆ ì¸ê°€ ë°›ì„ ë•Œ ì‚¬ìš©í•˜ëŠ” í† í°. ë³´í†µ ìˆ˜ëª…ì´ ì§§ë‹¤
- Refresh token: Access tokenì˜ ìˆ˜ëª…ì´ ë‹¤í–ˆì„ ë•Œ, Access tokenì„ ì¬ë°œí–‰ ë°›ê¸° ìœ„í•œ í† í°. ë³´í†µ 2ì£¼ ì •ë„ ê¸°ê°„ì´ ê¸¸ê²Œ ì¡íŒë‹¤

---

> ì°¸ê³ ìë£Œ<br>[1] [http://www.opennaru.com/opennaru-blog/jwt-json-web-token/](http://www.opennaru.com/opennaru-blog/jwt-json-web-token/)<br>[2] [https://velog.io/@syoung125/JWT-í† í°ì´ë€](https://velog.io/@syoung125/JWT-%ED%86%A0%ED%81%B0%EC%9D%B4%EB%9E%80)
